webpackJsonp([1],{"34KM":function(t,s){},NHnr:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("7+uW"),a={name:"Stars",props:{size:{type:Number},score:{type:Number}},data:function(){return{}},methods:{},computed:{starType:function(){return"star"+this.size},itemClasses:function(){for(var t=[],s=this.score%1!=0,e=Math.floor(this.score),i=0;i<e;i++)t.push("on");for(s&&t.push("half");t.length<5;)t.push("off");return t}}},n={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{class:this.starType,attrs:{id:"Stars"}},this._l(this.itemClasses,function(t,e){return s("span",{key:e,staticClass:"star-item",class:t})}),0)},staticRenderFns:[]};var o={name:"Header",components:{Stars:e("VU/8")(a,n,!1,function(t){e("e54U")},"data-v-0ab1ca19",null).exports},props:{},created:function(){this.iconMap=["decrease","discount","guarantee","invoice","special"],this.$store.dispatch("getSeller")},data:function(){return{isShow:!1}},methods:{clickShow:function(){this.isShow=!0},clickClose:function(){this.isShow=!1}},computed:{seller:function(){return this.$store.state.seller}}},r={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"Header"}},[e("div",{staticClass:"content-wrapper"},[e("div",{staticClass:"avatar"},[e("img",{attrs:{width:"64px",height:"64px",src:t.seller.avatar}})]),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"title"},[e("span",{staticClass:"brand"}),t._v(" "),e("span",{staticClass:"name"},[t._v(t._s(t.seller.name))])]),t._v(" "),e("div",{staticClass:"description"},[t._v("\n\t\t\t\t"+t._s(t.seller.description)+"/"+t._s(t.seller.deliveryTime)+"分钟送达\n\t\t\t")]),t._v(" "),t.seller.supports?e("div",{staticClass:"support"},[e("span",{staticClass:"icon",class:t.iconMap[t.seller.supports[0].type]}),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(t.seller.supports[0].description))])]):t._e()]),t._v(" "),t.seller.supports?e("div",{staticClass:"support-count",on:{click:t.clickShow}},[e("span",{staticClass:"count"},[t._v(t._s(t.seller.supports.length)+"个")]),t._v(" "),e("i",{staticClass:"icon-keyboard_arrow_right"})]):t._e()]),t._v(" "),e("div",{staticClass:"bulletin-wrapper",on:{click:t.clickShow}},[e("span",{staticClass:"bulletin-title"}),e("span",{staticClass:"bulletin-text"},[t._v(t._s(t.seller.bulletin))]),t._v(" "),e("i",{staticClass:"icon-keyboard_arrow_right"})]),t._v(" "),e("div",{staticClass:"background"},[e("img",{attrs:{src:t.seller.avatar,width:"100%",height:"100%"}})]),t._v(" "),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"detail"},[e("div",{staticClass:"detail-wraper clearfix"},[e("div",{staticClass:"detail-main"},[e("h1",{staticClass:"name"},[t._v(t._s(t.seller.name))]),t._v(" "),e("div",{staticClass:"stars-wrapper"},[e("Stars",{attrs:{size:48,score:t.seller.score}})],1),t._v(" "),e("div",{staticClass:"title"},[e("div",{staticClass:"line"}),t._v(" "),e("div",{staticClass:"text"},[t._v("优惠信息")]),t._v(" "),e("div",{staticClass:"line"})]),t._v(" "),t.seller.supports?e("ul",{staticClass:"supports"},t._l(t.seller.supports,function(s,i){return e("li",{key:i,staticClass:"supports-item"},[e("span",{staticClass:"icon",class:t.iconMap[t.seller.supports[i].type]}),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(s.description))])])}),0):t._e(),t._v(" "),e("div",{staticClass:"bulletin"},[e("div",{staticClass:"line"}),t._v(" "),e("div",{staticClass:"text"},[t._v("商家公告")]),t._v(" "),e("div",{staticClass:"line"})]),t._v(" "),e("div",{staticClass:"bulletin-content"},[e("span",{staticClass:"bulletin"},[t._v(t._s(t.seller.bulletin))])])])]),t._v(" "),e("div",{staticClass:"detail-close",on:{click:t.clickClose}},[e("i",{staticClass:"icon-close"})])])])],1)},staticRenderFns:[]};var c={name:"App",components:{Header:e("VU/8")(o,r,!1,function(t){e("WD4b")},"data-v-470e5eda",null).exports},data:function(){return{}},created:function(){this.$store.dispatch("getSeller")},computed:{seller:function(){return this.$store.state.seller}},methods:{}},l={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"app"}},[e("Header",{attrs:{seller:t.seller}}),t._v(" "),e("div",{staticClass:"tab border-1px"},[e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/Goods"}},[t._v("商品")])],1),t._v(" "),e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/Ratings"}},[t._v("评论")])],1),t._v(" "),e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/Seller"}},[t._v("商家")])],1)]),t._v(" "),e("router-view")],1)},staticRenderFns:[]};var d=e("VU/8")(c,l,!1,function(t){e("QeEP")},"data-v-1c6d12ee",null).exports,u=e("/ocq"),v=e("bOdI"),p=e.n(v),h=e("GQaK"),f={name:"Shopcart",props:{selectFoods:{type:Array}},data:function(){return{}},methods:{},computed:{goods:function(){return this.$store.state.goods},seller:function(){return this.$store.state.seller},selectFoodsCount:function(){var t=0;return this.selectFoods.forEach(function(s){s.count&&(t+=s.count)}),t},totalPrice:function(){var t=0;return this.selectFoods.forEach(function(s){s.count&&(t+=s.price*s.count)}),t},totalDesc:function(){return 0===this.totalPrice?"¥"+this.seller.minPrice+"起送":this.totalPrice<this.seller.minPrice?"还差¥"+(this.seller.minPrice-this.totalPrice)+"起送":"去结算"}},created:function(){this.$store.dispatch("getGoods"),this.$store.dispatch("getSeller")}},_={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"Shopcart"}},[e("div",{staticClass:"content"},[e("div",{staticClass:"left"},[e("div",{staticClass:"logo-wrapper"},[e("div",{staticClass:"logo",class:{"hight-light":t.selectFoodsCount>0}},[e("span",{staticClass:"icon-shopping_cart",class:{"hight-light":t.selectFoodsCount>0}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.selectFoodsCount>0,expression:"selectFoodsCount > 0"}],staticClass:"total"},[t._v(t._s(t.selectFoodsCount))])]),t._v(" "),e("div",{staticClass:"price",class:{"hight-light":t.totalPrice>0}},[t._v("¥"+t._s(t.totalPrice))]),t._v(" "),e("div",{staticClass:"desc"},[t._v("另需配送费￥"+t._s(t.seller.deliveryPrice)+"元")])]),t._v(" "),e("div",{staticClass:"right",class:{"hight-light":t.totalPrice>=t.seller.minPrice}},[t._v(t._s(t.totalDesc))])])])},staticRenderFns:[]};var C=e("VU/8")(f,_,!1,function(t){e("rWbP")},"data-v-38b9aece",null).exports,m={name:"CartControl",props:{food:{type:Object}},data:function(){return{}},methods:{addCart:function(){this.food.count?this.food.count++:i.a.set(this.food,"count",1),this.$emit("addCount",this.food)},decreaseCart:function(){this.food.count--,this.$emit("addCount",this.food)}},computed:{},created:function(){},updated:function(){}},g={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"CartControl"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count >0"}],staticClass:"cart-decrease icon-remove_circle_outline",on:{click:t.decreaseCart}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count >0"}],staticClass:"cart-count"},[t._v(t._s(t.food.count))]),t._v(" "),e("div",{staticClass:"cart-add icon-add_circle",on:{click:t.addCart}})])},staticRenderFns:[]};var w=e("VU/8")(m,g,!1,function(t){e("m4r1")},"data-v-0071cc06",null).exports,b=p()({name:"Goods",props:{},data:function(){return{classMap:["decrease","discount","guarantee","invoice","special"],listHeight:[],scrollY:0}},components:{Shopcart:C,CartControl:w},created:function(){var t=this;this.$store.dispatch("getGoods"),this.$nextTick(function(){t._initScroll(),t._calculate()})},updated:function(){},methods:{_initScroll:function(){var t=this;this.rightType=new h.a(this.$refs.rightType,{click:!0}),this.leftDetail=new h.a(this.$refs.leftDetail,{probeType:3,click:!0}),this.leftDetail.on("scroll",function(s){t.scrollY=Math.abs(Math.ceil(s.y))})},_calculate:function(){var t=this.$refs.leftDetail.getElementsByClassName("good-list-hook");this.listHeight.push(0);for(var s=0,e=0;s<t.length;s++)e+=t[s].offsetHeight,this.listHeight.push(e)},selectMenu:function(t,s){var e=this.$refs.leftDetail.getElementsByClassName("good-list-hook")[t];this.leftDetail.scrollToElement(e,300)},addCount:function(t){this.goods.forEach(function(s){s.foods.forEach(function(s){s.name===t.name&&s.info===t.info&&(s.count=t.count)})})}},computed:{currentIndex:function(){for(var t=0;t<this.listHeight.length;t++)if(!this.listHeight[t+1]||this.scrollY>=this.listHeight[t]&&this.scrollY<this.listHeight[t+1])return t;return 0},goods:function(){return this.$store.state.goods},selectFoods:function(){var t=[];return this.goods.forEach(function(s){s.foods.forEach(function(s){s.count&&t.push(s)})}),t}}},"updated",function(){}),y={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"Goods"}},[e("div",{ref:"rightType",staticClass:"right-type"},[e("ul",{staticClass:"menu-table"},t._l(t.goods,function(s,i){return t.goods?e("li",{key:i,staticClass:"table-item ",class:{current:t.currentIndex===i},on:{click:function(s){return t.selectMenu(i,s)}}},[e("div",{staticClass:"iconText border-1px"},[s.type>0?e("span",{staticClass:"icon",class:t.classMap[s.type]}):t._e(),e("span",{staticClass:"text"},[t._v(t._s(s.name))])])]):t._e()}),0)]),t._v(" "),e("div",{ref:"leftDetail",staticClass:"left-detail"},[e("ul",{staticClass:"foods-type"},t._l(t.goods,function(s,i){return e("li",{key:i,staticClass:"good good-list-hook"},[e("h1",{staticClass:"type-name"},[t._v(t._s(s.name))]),t._v(" "),e("ul",{staticClass:"foods"},t._l(s.foods,function(s,i){return e("li",{key:i,staticClass:"food border-1px"},[e("img",{attrs:{src:s.image,width:"60px",height:"60px"}}),t._v(" "),e("div",{staticClass:"food-description"},[e("h1",{staticClass:"name"},[t._v(t._s(s.name))]),t._v(" "),s.description?e("span",{staticClass:"description"},[t._v(t._s(s.description))]):t._e(),t._v(" "),e("span",{staticClass:"sell-count"},[t._v("月售"+t._s(s.sellCount)+"份")]),e("span",{staticClass:"rating"},[t._v("好评率"+t._s(s.rating)+"%")]),t._v(" "),e("div",{staticClass:"new-old"},[e("div",{staticClass:"price"},[e("span",{staticClass:"newPrice"},[t._v("¥"+t._s(s.price))]),s.oldPrice?e("span",{staticClass:"oldPrice"},[t._v(t._s(s.oldPrice))]):t._e()]),t._v(" "),e("div",{staticClass:"cartControl-wrapper"},[e("cartControl",{attrs:{food:s},on:{addCount:function(s){return t.addCount(s)}}})],1)])])])}),0)])}),0)]),t._v(" "),e("shopcart",{attrs:{selectFoods:t.selectFoods}})],1)},staticRenderFns:[]};var x=e("VU/8")(b,y,!1,function(t){e("WdlY")},"data-v-3383682e",null).exports,k={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"Ratings"}},[this._v("\n\tRatings\n")])},staticRenderFns:[]};var S=e("VU/8")({name:"Ratings",data:function(){return{}}},k,!1,function(t){e("oq+H")},"data-v-f9314808",null).exports,$={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"Seller"}},[this._v("\n\tSeller\n")])},staticRenderFns:[]};var P=e("VU/8")({name:"Seller",data:function(){return{}}},$,!1,function(t){e("wUgt")},"data-v-68fc0343",null).exports;i.a.use(u.a);var F=new u.a({routes:[{path:"/",redirect:x},{path:"/goods",name:"Goods",component:x},{path:"/ratings",name:"Ratings",component:S},{path:"/seller",name:"Seller",component:P}],mode:"history",linkActiveClass:"active"}),E=e("NYxO"),H=e("mtWM"),M=e.n(H);i.a.use(E.a);var R=new E.a.Store({state:{seller:{},goods:[]},mutations:{getSeller:function(t,s){t.seller=s},getGoods:function(t,s){t.goods=s}},actions:{getSeller:function(t){M.a.get("../.././static/seller.json").then(function(s){t.commit("getSeller",s.data.seller)})},getGoods:function(t){M.a.get("../.././static/goods.json").then(function(s){t.commit("getGoods",s.data.goods)})}}});e("34KM");i.a.config.productionTip=!1,i.a.prototype.$http=M.a,new i.a({el:"#app",router:F,store:R,components:{App:d},template:"<App/>"})},QeEP:function(t,s){},WD4b:function(t,s){},WdlY:function(t,s){},e54U:function(t,s){},m4r1:function(t,s){},"oq+H":function(t,s){},rWbP:function(t,s){},wUgt:function(t,s){}},["NHnr"]);
//# sourceMappingURL=app.4824db5053d3b86f64df.js.map